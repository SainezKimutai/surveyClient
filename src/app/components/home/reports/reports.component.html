<article *ngIf="ImprintLoader" class="imprint-loader home">
    <div class="imprint-loader-wrap">
        <div class="imprint-loader-main">
        <div class="imprint-loader-ball ball-one"></div>
        <div class="imprint-loader-ball ball-two"></div>
        <div class="imprint-loader-ball ball-three"></div>
        <div class="imprint-loader-ball ball-four"></div>
        </div>
    </div>
</article>
<div *ngIf="pdfDownloadProgressStatus" class="pdfDownloader">
    <circle-progress [percent]="pdfDownloadProgress" ></circle-progress>
</div>


<div class="page-title d-flex">
    <h4>Survey Reports</h4>  
</div>




<article class="article">

<section class="body-section">
    
 <section class="templates-section" *ngIf="TemeplateViewSectionStatus">

    <div class="card-group">
        <div *ngIf="pageProgress !== 100" class="progress-wrap">
            <circle-progress [percent]="pageProgress" ></circle-progress>
        </div>


        <div [hidden]="pageProgress !== 100" class="card" *ngFor="let item of AllSurveys" (click)="viewSurvey(item.surveyName, item._id)">
            <div class="card-header"></div>
            <div class="card-body">
                <fa-icon [icon]="faListAlt"></fa-icon>
                <h4>{{item.surveyName}}</h4>
            </div>
           

        </div>
        <div  [hidden]="pageProgress !== 100" class="card" *ngIf="AllSurveys && AllSurveys.length === 0">
            <div class="card-header"></div>
            <div class="card-body">
                <fa-icon [icon]="faListAlt"></fa-icon>
                <h4>No Template</h4>
            </div>
        </div>
        <!-- <div [hidden]="pageProgress !== 100" class="card" *ngIf="!AllSurveys">
            <div class="card-header"></div>
            <div class="card-body d-flex">
                <div class="spinner-div spinner-border mx-auto" role="status"></div>
            </div>
        </div> -->
    </div>

 </section>

 <section class="Questions-listing" [hidden]="!QuestionsViewStatus">

    <div class="head d-flex">
        <button class="btn btn-sm mr-auto" (click)="viewSurveyTemplates()"> <fa-icon style="color: white;" [icon]="faBackward"></fa-icon> </button>
        <h4 class="mr-auto">{{TemplateNameOnView}}</h4>
        <button class="btn btn-sm ml-auto btn-success" (click)="downloadPdf(); ImprintLoader = true"> <fa-icon [icon]="faDownload"></fa-icon></button>
    </div>


    <div id="top-header" class="top-header">

        <h2>Risk Analysis Report</h2>

    </div>

    
    <section id=summaryGraph class="risk-graph-section">
        
        <div class="title d-flex"> <span>Your risk representations</span>
            <div class=" graph-switch d-flex ml-auto">
                <span (click)="chart3graphToLine()"><fa-icon [icon]="faChartLine" [ngClass]="chart3Type === 'line' ? 'active' : ''" ></fa-icon></span> 
                <span (click)="chart3graphToBar()"><fa-icon [icon]="faChartBar" [ngClass]="chart3Type === 'bar' ? 'active' : ''" ></fa-icon></span>
                <!-- <span (click)="chart3graphToPie()"> <fa-icon [icon]="faChartPie" [ngClass]="chart3Type === 'pie' ? 'active' : ''" ></fa-icon> </span> -->
            </div>
        </div>

        <div class="body-wrapper">
            <canvas *ngIf="chart3Type" baseChart class="chart" [chartType]="chart3Type" [labels]="chart3Labels"
            [datasets]="chart3Datasets" [options]="chart3ChartOptions" [plugins]="pluginDataLabels"></canvas>
        </div>

</section>



   
    <div #reportTemplate id="reportTemplate">
    <div class="question-wrap"  *ngFor="let item of TemplateQuestions; let i = index" id="quiz{{i}}">
        <div class="question d-flex w-100">{{i+1}}. {{item.question}}</div>
        <div class="choices-wrapper">
        <div class="choices answer">
            <span>{{item.answer}}</span>
        </div>
        <div class="choices recom" *ngIf="item.level">
            <span>Mapped Risk: <span class="span-inner">{{item.threat}}</span> </span>
        </div>
        <div class="choices threat" *ngIf="item.level">
            <span>Threat Level: <span class="{{item.level}}">{{item.level}}</span> </span>
        </div>
        <div class="choices recom" *ngIf="item.recom">
            <span>Recommendation: <span class="span-inner">{{item.recom}}</span> </span>
        </div>
        </div>
    </div>
    </div>
     
 </section>

</section> 

</article>