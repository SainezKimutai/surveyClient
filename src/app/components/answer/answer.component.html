<article *ngIf="ImprintLoader" class="imprint-loader home">
    <div class="imprint-loader-wrap">
        <div class="imprint-loader-main">
        <div class="imprint-loader-ball ball-one"></div>
        <div class="imprint-loader-ball ball-two"></div>
        <div class="imprint-loader-ball ball-three"></div>
        <div class="imprint-loader-ball ball-four"></div>
        </div>
    </div>
</article>



<main>



    <div class="side-bg"></div>
    
    
    
    <section class="body-section d-flex">
       
        
        <div class="form-section mx-auto">
    
    
            <div class="logo-section">
                <div class="wrap">
                    <h4>{{surveyName}}</h4>
    
                    <img class="logo" src="../../../assets/images/logo1.png" alt="" >

                    <button *ngIf="pageNumber === 1" class="btn btn-sm btn-outline-light" (click)="back()">Back</button>
                    <button *ngIf="pageNumber > 1" class="btn btn-sm btn-outline-warning" (click)="saveAndExit()">Save & continue later</button>
                    <button *ngIf="pageNumber > 1" class="btn btn-sm btn-outline-light mt-4" (click)="moveToPreviousQuestion()" >Move to previous question</button>
                </div>
    
            </div>
    
    
            <div class="form-wrap">
    
    
            <form class="form">

                <div *ngIf="pageProgress !== 100" class="progress-wrap">
                    <circle-progress [percent]="pageProgress" ></circle-progress>
                </div>


                <div *ngIf="notificationForm" class="notificationForm">
                    <div class="wrap-success"> <h5>Success !!</h5>
                       <p> Survey responses submited</p>
                    </div>
                    <div class="wrap-thank-you"> <h5>Thank you</h5>
                        <p>for choosing to answer our survey</p>
                    </div>
                </div>
    
                <div *ngIf="questions.length > 0 && pageProgress === 100 && !notificationForm" [ngClass]="'dynamic-wrapper'">

                    <div class="head">
                        <h4>Answer section</h4>
                    </div>
        
                    <div class="form-group">
                        <p>{{questionTag}}</p>
                    </div>
                    
                    <div class="form-group" *ngIf="open">
                        <input id="typeInput" type="{{type}}" [(ngModel)]="response" (keyup)="captureResponse(); detectChangeOnAnswer();" name="response" placeholder="">
                    </div>


                    <div class="multy-choice-wrap w-100"  *ngIf="!open && multiple">
                        <div class="form-group" *ngFor="let option of options">
                            <input type="checkbox"
                            [checked]="multiAnswers.indexOf(option.answer) > -1 || option.answer === response"
                            (click)="captureMultipleResponses(option); detectChangeOnAnswer();" name="response" value="{{option.answer}}">
                            <label for="response">{{option.answer}}</label>
                        </div>
                    </div>
                    <div class="multy-choice-wrap w-100"  *ngIf="!open && !multiple">
                        <div class="form-group" *ngFor="let option of options">
                            <input type="radio" [(ngModel)]="response" name="response" (change)="captureSingleResponse(option); detectChangeOnAnswer();" value="{{option.answer}}">
                            <label for="response">{{option.answer}}</label>
                        </div>
                    </div>

                    <div *ngIf="skip && previousSteps === 0" class="btn-wrap d-flex">
                        <button *ngIf="(response==='' || responseArray.length ===0)"
                        [disabled]="response || responseArray.length !== 0"
                        class="btn btn-sm btn-next ml-auto" (click)="next(pageNumber)">Skip</button>
                        <button *ngIf="!isLast && (response || responseArray.length !==0)"
                        [disabled]="(response === '' || !response) && responseArray.length === 0"
                        class="btn btn-sm btn-next ml-auto" (click)="next(pageNumber)">Next</button>
                        <button *ngIf="isLast && (response || response !== '' || responseArray.length !==0)" [disabled]="(!response || response === '') && responseArray.length === 0"
                        class="btn btn-sm btn-next ml-auto" (click)="Process(pageNumber)">Submit</button>
                    </div>

                    <div *ngIf="!skip && !isLast && previousSteps === 0" class="btn-wrap d-flex">
                        <button [disabled]="(response === '' || !response) && responseArray.length === 0"
                        class="btn btn-sm btn-next ml-auto" (click)="next(pageNumber)">Next</button>
                    </div>
                    <div *ngIf="previousSteps > 0" class="btn-wrap d-flex">
                        <button [disabled]="(response === '' || !response) && responseArray.length === 0"
                        class="btn btn-sm btn-next ml-auto" (click)="updatePreviousAnswers()">Update & Next</button>
                    </div>

                    <div *ngIf="isLast && !skip && previousSteps === 0" class="btn-wrap d-flex">
                        <button [disabled]="(!response || response === '') && responseArray.length === 0"
                        class="btn btn-sm btn-next ml-auto" (click)="Process(pageNumber)">Submit</button>
                    </div>

                    <div class="text-muted">
                        <h6>{{((pageNumber-1) / totalPages)*100 | number:'1.0-2'}}  % Done</h6>
                    </div>

                </div>

            </form>

    
            </div>
    
        </div>
    
    </section>
    
    
    
    </main>
    
<div bsModal #termsModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
    [config]="{backdrop: 'static',  keyboard: false}" >
        <div class="modal-dialog termsModal modal-md" role="document">
            <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Terms and conditions</h4>
            </div>
            <div class="modal-body" >
                 <div class="text">
                     I am happy for Tactive Consulting to process my personal data for the purpose of this 
                     assessment as further described
                     in the <a routerLink="/terms-and-conditions">Privacy Statement</a> in order to receive personalized resposes and recommendations.
                      I consent to my email address being 
                     shared with Tactive Consulting contacts in a local territory member firm.
                     I concent that Tactive Consulting can contact me to discuss my responses and 
                     provide me with information that may be of interest 
                     to me.
                 </div>
            </div>
            <div class="modal-footer">
                <button   type="button" class="btn btn-cancel" (click)="termsModal.hide(); back();">Decline</button>
                <button   type="button" class="btn btn-confirm" (click)="termsModal.hide()">Accept</button>
            </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>
    
    